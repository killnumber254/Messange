(this["webpackJsonpmy-cha"]=this["webpackJsonpmy-cha"]||[]).push([[0],{33:function(e,t,a){e.exports={block:"Chat_block__1bdeL"}},38:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(30),i=a.n(r),c=a(10),l=a(11),h=a(13),o=a(12),u=(a(38),a(5)),d=a(6),j=a.n(d),b=a(2),p=a(0),m=function(e){Object(h.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={username:"",password:""},s.handleChangeUser=s.handleChangeUser.bind(Object(u.a)(s)),s.handleChangePassword=s.handleChangePassword.bind(Object(u.a)(s)),s.handleClick=s.handleClick.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleChangeUser",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){console.log(e.keyCode),e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),j.a.defaults.withCredentials=!0;var a={username:this.state.username,password:this.state.password};j.a.post("http://127.0.0.1:3001/login",a,{withCredentials:!0}).then((function(e){console.log(e.data);var a=t.props.setUser;e.data.user.username&&(a(e.data.user.username),t.props.history.push("/logs"))}))}},{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(p.jsx)("input",{value:this.state.username,onChange:this.handleChangeUser,type:"email",className:"form-control",id:"exampleInputEmail1"})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(p.jsx)("input",{value:this.state.password,onChange:this.handleChangePassword,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(p.jsx)("button",{type:"submit",ref:this.logButton,onKeyDown:this.keyBoard,onClick:this.handleClick,className:"btn btn-primary",children:"Submit"})]})})}}]),a}(s.Component),v=Object(b.e)(m),f=a(14),O=(a(66),function(){return Object(p.jsxs)("div",{className:"nav",children:[Object(p.jsx)(f.b,{exact:!0,to:"/en",className:"navEN",children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(f.b,{exact:!0,to:"/regist",className:"navRegist",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})}),g=function(e){Object(h.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={username:"",password:""},s.handleChangeUser=s.handleChangeUser.bind(Object(u.a)(s)),s.handleChangePassword=s.handleChangePassword.bind(Object(u.a)(s)),s.handleClick=s.handleClick.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleChangeUser",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a={username:this.state.username,password:this.state.password};j.a.post("http://127.0.0.1:3001/regist",a).then((function(e){return e})).then((function(e){console.log(e);var a=t.props.setUser;if(e.data.token)return a(e.data.token),t.props.history.push("/logs")}))}},{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(p.jsx)("input",{value:this.state.username,onChange:this.handleChangeUser,type:"email",className:"form-control",id:"exampleInputEmail1"})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(p.jsx)("input",{value:this.state.password,onChange:this.handleChangePassword,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(p.jsx)("button",{type:"submit",ref:this.logButton,onKeyDown:this.keyBoard,onClick:this.handleClick,className:"btn btn-primary",children:"Submit"})]})})}}]),a}(s.Component),x=Object(b.e)(g),C=(a(67),a(21)),k=a.n(C),y=a(32),w=a(33),N=a.n(w);var S=function(e){var t=e.handleChange,a=e.handleClick,s=e.value;return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"chat_text",children:[Object(p.jsx)("input",{type:"text",onChange:t,value:s}),Object(p.jsx)("button",{type:"submit",onClick:a,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})},U=function(e){var t=e.data.map((function(e){return Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{children:e.usernames}),e.messange]},e.id)}));return Object(p.jsx)("ul",{children:t})},P=function(e){Object(h.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).ref=n.a.createRef(),s.state={data:[],message:"",chat:"",datas:[],width:0},s.handleChange=s.handleChange.bind(Object(u.a)(s)),s.handleClick=s.handleClick.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleChange",value:function(e){e.preventDefault(),this.setState({message:e.target.value})}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),this.setState({message:""}),this.postDataBase(),setTimeout((function(){t.dataBase()}),100)}},{key:"postDataBase",value:function(){var e=Object(y.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.user,a={messager:this.state.message,usernames:t},e.next=4,j.a.post("http://127.0.0.1:3001/chat",a);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dataBase",value:function(){var e=this;j.a.get("http://127.0.0.1:3001/chat:message",{withCredentials:!0}).then((function(t){e.setState({datas:t.data}),console.log(t.data)}))}},{key:"scrollBottom",value:function(){this.ref.current.scrollIntoView({block:"end",behavior:"smooth"})}},{key:"componentDidMount",value:function(){var e=this;this.scrollBottom(),j.a.get("http://127.0.0.1:3001/chat:mess",{withCredentials:!0}).then((function(t,a){e.setState({datas:t.data})}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:N.a.block,ref:this.ref,children:[Object(p.jsx)(U,{data:this.state.datas}),Object(p.jsx)(S,{value:this.state.message,handleChange:this.handleChange,handleClick:this.handleClick})]})}}]),a}(s.Component),D=function(e){var t=e.users;console.log(t);var a=t.map((function(e){return console.log(e),Object(p.jsx)("li",{children:Object(p.jsx)("p",{children:e.username})},e.id)}));return Object(p.jsx)("ul",{children:a})},B=function(e){Object(h.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={users:null},s}return Object(l.a)(a,[{key:"handleClick",value:function(){var e=this;j.a.get("http://127.0.0.1:3001/exit").then((function(t){var a=e.props.setUser;201===t.status&&(a(t.data.user),e.props.history.push("/en"))}))}},{key:"componentDidMount",value:function(){var e=this;j.a.get("http://127.0.0.1:3001/users").then((function(t){e.setState({users:t.data})})),j.a.get("http://127.0.0.1:3001/log",{withCredentials:!0}).then((function(t){var a=e.props.setUser;200===t.status&&a(t.data.user)}))}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(D,{users:this.state.users}),Object(p.jsx)("button",{type:"submit",onClick:this.handleClick.bind(this),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(p.jsx)(P,{})]})}}]),a}(s.Component),F=Object(b.e)(B),I=function(e){Object(h.a)(a,e);var t=Object(o.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).setUser=function(e){console.log(e),s.setState({user:e})},s.state={user:null,data:null,isAuthStatus:!1},s}return Object(l.a)(a,[{key:"render",value:function(){var e=null;return this.state.user||(e=Object(p.jsxs)("div",{className:"auth_regist",children:[Object(p.jsx)(O,{}),Object(p.jsx)(b.a,{path:"/en",children:Object(p.jsx)(v,{isAuthStatus:this.isAuthStatus,setUser:this.setUser,user:this.state.user})}),Object(p.jsx)(b.a,{path:"/regist",children:Object(p.jsx)(x,{setUser:this.setUser,isAuthStatus:this.isAuthStatus})})]})),Object(p.jsxs)(f.a,{children:[e,Object(p.jsx)(b.a,{path:"/logs",children:Object(p.jsx)(F,{isAuthStatus:this.isAuthStatus,setUser:this.setUser,user:this.state.user})})]})}}]),a}(s.Component),E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,70)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),r(e),i(e)}))};i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(I,{})}),document.getElementById("root")),E()}},[[69,1,2]]]);